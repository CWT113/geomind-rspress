# 基础使用

`Cesium` 是基于 WebGL 实现三维地球和地图可视化的 JS 库，支持海量的三维模型数据、影像数据、地形高程数据、矢量数据等丰富的地理数据的加载。



## 安装

安装 cesium 包和 vite-plugin-cesium 插件：

```shell
pnpm install cesium vite-plugin-cesium
```

在 `vite.config.ts` 中，注册 vite-plugin-cesium 插件：

```typescript {1}
import cesium from "vite-plugin-cesium";

export default defineConfig({
  plugins: [
    vue(), 
    cesium()
  ]
});
```

页面中引入 cesium 的包：

```typescript
import * as Cesium from "cesium";
// 或者
import { Viewer } from "cesium";
```



## 入门案例

```vue
<template>
	<div id="mapContainer"></div>
</template>

<script setup lang="ts">
  import { onMounted } from 'vue';
  import * as Cesium from 'cesium';
  import 'cesium/Build/Cesium/Widgets/widgets.css';

  Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMGM1ODNmMi01NjgxLTRiNjYtYjEzYS0xMWZhODZlNDIyOWIiLCJpZCI6MTE2MzEzLCJpYXQiOjE3MzY2NjMwNjN9.tTeB32oDNJyNSn7iecCvMb2O5ETRw56CmX_OCSsMu34';

  onMounted(() => {
    const viewer = new Cesium.Viewer('mapContainer', {
      infoBox: false
    });
  });
</script>

<style scoped>
  #mapContainer {
    position: absolute;
    width: 100%;
    height: 100%;
  }
</style>

```

## 基础配置参数

```typescript
const viewer = new Cesium.Viewer('mapContainer', {
  infoBox: false,
  // 选择图层控件
  baseLayerPicker: false,
  // 动画控件按钮
  animation: false,
  // 时间轴控件
  timeline: false,
  // 全屏按钮控件
  fullscreenButton: false,
  // 搜索框控件
  geocoder: false,
  // 默认视图控件
  homeButton: false,
  // 帮助按钮控件
  navigationHelpButton: false,
  // 投影方式控件
  sceneModePicker: false,
  // 三维地形
  terrain: new Cesium.Terrain(
    Cesium.CesiumTerrainProvider.fromIonAssetId(3956, {
      requestVertexNormals: true,
      requestWaterMask: true,
    }),
  ),
  // 初始场景模式
  sceneMode: Cesium.SceneMode.SCENE3D,
  // 几何体以3D形式渲染，以节省CPU内存
  scene3DOnly: true,
  // 启用按需渲染模式（只在相机位置、方向发生变化等情况才刷新帧）
  requestRenderMode: true,
  // 配合requestRenderMode使用，表示刷新帧率不随时间变化（如果有动画随时间变化的话，需要调整该属性值）
  maximumRenderTimeChange: Infinity,
  // 阴影是否由光源投射
  shadows: true,
  // WebGL场景上下文配置
  contextOptions: {
    // 如果浏览器支持，使用 webgl 1 进行渲染
    requestWebgl1: true,
    // 支持webgl扩展时，启用异向纹理过滤（设置为false可提升性能，但损害视觉质量）
    allowTextureFilterAnisotropic: true,
    webgl: {
      // 禁用透明通道，以提升性能
      alpha: false,
      // 启用深度测试，用于3D渲染
      depth: true,
      // 不使用模板缓冲区
      stencil: false,
      // 启用抗锯齿
      antialias: true,
      // GPU功耗偏好（可选："default" | "high-performance" | "low-power）
      powerPreference: "high-performance",
    },
  },
});

// 隐藏版权logo
viewer.cesiumWidget.creditContainer.setAttribute('style', 'display: none');
// viewer.cesiumWidget.creditContainer.style.display = 'none';

// 设置渲染分辨率，从而提高视觉保真度
viewer.resolutionScale = window.devicePixelRatio;
// 是否启用FPS帧率显示
viewer.scene.debugShowFramesPerSecond = false;
// 关闭地形深度检测
viewer.scene.globe.depthTestAgainstTerrain = false;
// 开启抗锯齿
window.viewer.scene.postProcessStages.fxaa.enabled = true;
```



